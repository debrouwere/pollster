store:
  image: redis

scheduler:
  image: debrouwere/jobs
  command: job tick --host store
  links:
    - store

poller.careful:
  image: debrouwere/pollster
  command: /pollster/poll careful
  links:
    - store
    - scheduler
  environment:
    - JOBS_REDIS_HOST=store
    - AWS_REGION
    - AWS_ACCESS_KEY_ID
    - AWS_SECRET_ACCESS_KEY
    - POLLSTER_SQS
    - POLLSTER_DYNAMODB
    - POLLSTER_CLOUDWATCH

poller.frequent:
  image: debrouwere/pollster
  command: /pollster/poll frequent
  links:
    - store
    - scheduler
  environment:
    - JOBS_REDIS_HOST=store
    - AWS_REGION
    - AWS_ACCESS_KEY_ID
    - AWS_SECRET_ACCESS_KEY
    - POLLSTER_SQS
    - POLLSTER_DYNAMODB
    - POLLSTER_CLOUDWATCH

submitter:
  image: debrouwere/pollster
  command: /pollster/submit
  links:
    - store
    - scheduler
  environment:
    - JOBS_REDIS_HOST=store
    - ARTICLE_FEED
    - ARTICLE_PATH_TO_URL
    - POLLER_FREQUENT_INTERVAL
    - POLLER_CAREFUL_INTERVAL
    - POLLER_DECAY
    - POLLER_DURATION
